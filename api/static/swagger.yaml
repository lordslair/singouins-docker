openapi: 3.0.0
info:
  description: ''
  version: 0.0.1
  title: S&P Internal API
  contact: {}
paths:
  /internal/creature/effects:
    post:
      tags:
        - '/internal : Internal requests'
      summary: Internal Creature Effects request
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InternalCreature'
      responses:
        '200':
          description: OK - Effects found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalCreatureEffectsResponse'
        '400':
          description: KO - Malformed JSON
      security:
        - internal_token: []
  /internal/creature/equipment:
    post:
      tags:
        - '/internal : Internal requests'
      summary: Internal Creature Equipment request
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InternalCreature'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalCreatureEquipmentResponse'
      security:
        - internal_token: []
  /internal/creature/pa:
    post:
      tags:
        - '/internal : Internal requests'
      summary: Internal Creature PA request
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InternalCreature'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalCreaturePaResponse'
      security:
        - internal_token: []
  /internal/creature/pa/reset:
    post:
      tags:
        - '/internal : Internal requests'
      summary: Internal Creature PA reset request
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InternalCreature'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security:
        - internal_token: []
  /internal/creature/profile:
    post:
      tags:
        - '/internal : Internal requests'
      summary: Internal Creature profile request
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InternalCreature'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalCreatureProfileResponse'
      security:
        - internal_token: []
  /internal/creature/stats:
    post:
      tags:
        - '/internal : Internal requests'
      summary: Internal Creature Stats request
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InternalCreature'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalCreatureStatsResponse'
      security:
        - internal_token: []
  /internal/creature/statuses:
    post:
      tags:
        - '/internal : Internal requests'
      summary: Internal Creature Stats request
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InternalCreature'
      responses:
        '200':
          description: OK - Statuses found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalCreatureStatusesResponse'
        '400':
          description: KO - Malformed JSON
      security:
        - internal_token: []
  /internal/creature/wallet:
    post:
      tags:
        - '/internal : Internal requests'
      summary: Internal Creature Wallet request
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InternalCreature'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalCreatureWalletResponse'
      security:
        - internal_token: []
  /internal/up:
    get:
      tags:
        - '/internal : Internal requests'
      summary: Internal UP request
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security:
        - internal_token: []
  /internal/discord/associate:
    post:
      tags:
        - '/internal : Internal requests'
      summary: User/Discord association request
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                discordname:
                  type: string
                  pattern: '^.{3,32}#[0-9]{4}$' # regex for discord username
                  example: 'DiscordName#1234'
                  nullable: false
                usermail:
                  type: string
                  format: email
                  nullable: false
      responses:
        '200':
          description: OK - User/Discord associated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalUserResponse'
        '400':
          description: KO - Malformed JSON
      security:
        - internal_token: []
  /internal/discord/creature:
    post:
      tags:
        - '/internal : Internal requests'
      summary: Internal Creature access request
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                discordname:
                  type: string
                  pattern: '^.{3,32}#[0-9]{4}$' # regex for discord username
                  example: 'DiscordName#1234'
                  nullable: false
                creatureid:
                  type: integer
                  minimum: 1
                  nullable: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalDiscordCreatureResponse'
      security:
        - internal_token: []
  /internal/discord/creatures:
    post:
      tags:
        - '/internal : Internal requests'
      summary: Internal Creatures request
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                discordname:
                  type: string
                  pattern: '^.{3,32}#[0-9]{4}$' # regex for discord username
                  example: 'DiscordName#1234'
                  nullable: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalDiscordCreaturesResponse'
      security:
        - internal_token: []
  /internal/discord/user:
    post:
      tags:
        - '/internal : Internal requests'
      summary: User information request
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                discordname:
                  type: string
                  pattern: '^.{3,32}#[0-9]{4}$' # regex for discord username
                  example: 'DiscordName#1234'
                  nullable: false
      responses:
        '200':
          description: OK - User found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalUserResponse'
        '400':
          description: KO - Malformed JSON
      security:
        - internal_token: []
  /internal/squad:
    post:
      tags:
        - '/internal : Internal requests'
      summary: Squad information request (one)
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InternalSquad'
      responses:
        '200':
          description: OK - Squad found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalSquadResponse'
        '400':
          description: KO - Malformed JSON
      security:
        - internal_token: []
  /internal/squads:
    get:
      tags:
        - '/internal : Internal requests'
      summary: Squads information request (all)
      responses:
        '200':
          description: OK - Squads found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalSquadsResponse'
        '400':
          description: KO - Malformed JSON
      security:
        - internal_token: []
  /internal/korp:
    post:
      tags:
        - '/internal : Internal requests'
      summary: Korp information request (one)
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InternalKorp'
      responses:
        '200':
          description: OK - Korp found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalKorpResponse'
        '400':
          description: KO - Malformed JSON
      security:
        - internal_token: []
  /internal/korps:
    get:
      tags:
        - '/internal : Internal requests'
      summary: Korps information request (all)
      responses:
        '200':
          description: OK - Korps found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalKorpsResponse'
      security:
        - internal_token: []

  /auth/register:
    post:
      tags:
        - '/auth: Authentificaton Requests'
      summary: Register a new user
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthRegisterPostBody'
      responses:
        '201':
          description: OK - User registered | Registration mail sent
        '206':
          description: OK - User registered | Registration mail not sent
        '400':
          description: KO - Missing information in request
        '401':
          description: KO - Bad information in request
  /auth/confirm/{token}:
    post:
      tags:
        - '/auth: Authentificaton Requests'
      summary: Conirm a new user
      parameters:
        - in: path
          name: token
          schema:
            type: string
          required: true
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthRegisterPostBody'
      responses:
        '201':
          description: OK - User confirmed
        '498':
          description: KO - Token expired
  /auth/login:
    post:
      tags:
        - '/auth: Authentificaton Requests'
      summary: Returns access_token & refresh_token
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthLoginPostBody'
      responses:
        '200':
          description: OK - User logged in
        '400':
          description: KO - Missing information in request
        '401':
          description: KO - Bad information in request
  /auth/refresh:
    post:
      tags:
        - '/auth: Authentificaton Requests'
      summary: Returns new access_token from refresh_token
      security:
        - refresh_token: []
      responses:
        '200':
          description: OK
  /auth/infos:
    get:
      tags:
        - '/auth: Authentificaton Requests'
      summary: Get informations from an authenticated user
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /auth/delete/{username}:
    delete:
      tags:
        - '/auth: Authentificaton Requests'
      summary: Permanently delete a PC from DB
      parameters:
        - in: path
          name: username
          schema:
            type: string
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK - User deleted
        '400':
          description: KO - Missing information in request
        '404':
          description: KO - User not found

  /mypc:
    post:
      tags:
        - '/mypc: PC Requests (on your own PC)'
      summary: Create a new PC for logged in user
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PcCreateBody'
      security:
        - access_token: []
      responses:
        '201':
          description: OK - PC created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
        '400':
          description: KO - Missing information in request
        '409':
          description: KO - PC already exists
    get:
      tags:
        - '/mypc: PC Requests (on your own PC)'
      summary: Get PC list belonging to logged in user
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}:
    get:
      tags:
        - '/mypc: PC Requests (on your own PC)'
      summary: Get PC informations
      security:
        - access_token: []
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
      responses:
        '200':
          description: OK
    delete:
      tags:
        - '/mypc: PC Requests (on your own PC)'
      summary: Delete a PC
      security:
        - access_token: []
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
      responses:
        '200':
          description: OK - PC deleted
  /mypc/{pcid}/skills:
    get:
      tags:
        - '/mypc: PC Requests (on your own PC)'
      summary: Get PC skills
      security:
        - access_token: []
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
            example: 1
          required: true
      responses:
        '200':
          description: OK - Skills found
  /mypc/{pcid}/cds:
    get:
      tags:
        - '/mypc: PC Requests (on your own PC)'
      summary: Get PC CDs
      security:
        - access_token: []
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
            example: 1
          required: true
      responses:
        '200':
          description: OK - Skills found
  /mypc/{pcid}/view:
    get:
      tags:
        - '/mypc: PC Requests (on your own PC)'
      summary: Get PC view
      security:
        - access_token: []
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
            example: 1
          required: true
      responses:
        '200':
          description: OK - view found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'

  /mypc/{pcid}/instance:
    post:
      tags:
        - '/mypc/{pcid}/instance: Instance Requests'
      summary: Create a fresh instance
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InstanceCreateBody'
      security:
        - access_token: []
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
            example: 1
          required: true
      responses:
        '201':
          description: OK - Instance creation successed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
  /mypc/{pcid}/instance/{instanceid}/leave:
    post:
      tags:
        - '/mypc/{pcid}/instance: Instance Requests'
      summary: Leave an instance
      security:
        - access_token: []
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
            example: 1
          required: true
        - in: path
          name: instanceid
          schema:
            type: integer
            example: 14
          required: true
      responses:
        '200':
          description: OK - Instance leave successed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
  /mypc/{pcid}/instance/{instanceid}/join:
    post:
      tags:
        - '/mypc/{pcid}/instance: Instance Requests'
      summary: Join an instance
      security:
        - access_token: []
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
            example: 1
          required: true
        - in: path
          name: instanceid
          schema:
            type: integer
            example: 14
          required: true
      responses:
        '200':
          description: OK - Instance join successed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'

  /pc/{pcid}:
    get:
      tags:
        - '/pc : PC Requests (not on your own PC)'
      summary: Get PC informations
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
      responses:
        '200':
          description: OK
  /pc/name/{name}:
    get:
      tags:
        - '/pc : PC Requests (not on your own PC)'
      summary: Get PC informations
      parameters:
        - in: path
          name: name
          schema:
            type: string
          required: true
      responses:
        '200':
          description: OK

  /mypc/{pcid}/mp:
    post:
      tags:
        - '/mp: MP Requests'
      summary: Send a MP from a PC to a list of PCs
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MpSendPostBody'
      security:
        - access_token: []
      responses:
        '201':
          description: OK - MP sent
        '409':
          description: KO - Token/username mismatch
    get:
      tags:
        - '/mp: MP Requests'
      summary: Get MP list for a PC
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
      responses:
        '200':
          description: OK
        '409':
          description: KO - Token/username mismatch
  /mypc/{pcid}/mp/{mpid}:
    get:
      tags:
        - '/mp: MP Requests'
      summary: Get full MP
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: mpid
          schema:
            type: integer
          required: true
      responses:
        '200':
          description: OK
        '409':
          description: KO - Token/username mismatch
    delete:
      tags:
        - '/mp: MP Requests'
      summary: Delete a MP from a PC
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: mpid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK - MP deleted
        '409':
          description: KO - Token/username mismatch
  /mypc/{pcid}/mp/addressbook:
    get:
      tags:
        - '/mp: MP Requests'
      summary: Get Addressbook from a PC
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
      responses:
        '200':
          description: OK
        '409':
          description: KO - Token/username mismatch

  /mypc/{pcid}/item:
    get:
      tags:
        - '/item : Item Requests'
      summary: Get item list for a PC
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK

  /mypc/{pcid}/squad:
    post:
      tags:
        - '/squad : Squad Requests'
      summary: Create a squad for a PC
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}/squad/{squadid}:
    get:
      tags:
        - '/squad : Squad Requests'
      summary: Get squad list for a PC
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: squadid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
    delete:
      tags:
        - '/squad : Squad Requests'
      summary: Delete a squad for a PC (Leader only)
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: squadid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}/squad/{squadid}/invite/{targetid}:
    post:
      tags:
        - '/squad : Squad Requests'
      summary: Invite a PC into a squad (Leader only)
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: squadid
          schema:
            type: integer
          required: true
        - in: path
          name: targetid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}/squad/{squadid}/kick/{targetid}:
    post:
      tags:
        - '/squad : Squad Requests'
      summary: Kick a PC from a squad (Leader only)
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: squadid
          schema:
            type: integer
          required: true
        - in: path
          name: targetid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}/squad/{squadid}/accept:
    post:
      tags:
        - '/squad : Squad Requests'
      summary: Accept a squad invite
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: squadid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}/squad/{squadid}/decline:
    post:
      tags:
        - '/squad : Squad Requests'
      summary: Decline a squad invite
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: squadid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}/squad/{squadid}/leave:
    post:
      tags:
        - '/squad : Squad Requests'
      summary: Leave a squad
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: squadid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK

  /mypc/{pcid}/korp:
    post:
      tags:
        - '/korp : Korp Requests'
      summary: Create a korp for a PC
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
      requestBody:
        description: ''
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KorpCreateBody'
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}/korp/{korpid}:
    get:
      tags:
        - '/korp : Korp Requests'
      summary: Get korp list for a PC
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: korpid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
    delete:
      tags:
        - '/korp : Korp Requests'
      summary: Delete a korp for a PC (Leader only)
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: korpid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}/korp/{korpid}/invite/{targetid}:
    post:
      tags:
        - '/korp : Korp Requests'
      summary: Invite a PC into a korp (Leader only)
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: korpid
          schema:
            type: integer
          required: true
        - in: path
          name: targetid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}/korp/{korpid}/kick/{targetid}:
    post:
      tags:
        - '/korp : Korp Requests'
      summary: Kick a PC from a korp (Leader only)
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: korpid
          schema:
            type: integer
          required: true
        - in: path
          name: targetid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}/korp/{korpid}/accept:
    post:
      tags:
        - '/korp : Korp Requests'
      summary: Accept a korp invite
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: korpid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}/korp/{korpid}/decline:
    post:
      tags:
        - '/korp : Korp Requests'
      summary: Decline a korp invite
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: korpid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK
  /mypc/{pcid}/korp/{korpid}/leave:
    post:
      tags:
        - '/korp : Korp Requests'
      summary: Leave a korp
      parameters:
        - in: path
          name: pcid
          schema:
            type: integer
          required: true
        - in: path
          name: korpid
          schema:
            type: integer
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK

  /meta/item/{itemtype}:
    get:
      tags:
        - '/meta : Get Meta informations'
      summary: Get item Meta informations
      parameters:
        - in: path
          name: itemtype
          schema:
            type: string
            enum: [weapon, potion, armor]
          required: true
      security:
        - access_token: []
      responses:
        '200':
          description: OK

components:
  schemas:
    InternalSquad:
      type: object
      properties:
        squadid:
          type: integer
          minimum: 1
          nullable: true
    InternalKorp:
      type: object
      properties:
        korpid:
          type: integer
          minimum: 1
          nullable: false
    InternalCreature:
      type: object
      properties:
        creatureid:
          type: integer
          minimum: 1
          nullable: false

    AuthRegisterPostBody:
      type: object
      properties:
        username:
          type: string
          format: string
        password:
          type: string
          format: password
        mail:
          type: string
          format: string
    AuthLoginPostBody:
      type: object
      properties:
        username:
          type: string
          format: string
        password:
          type: string
          format: password

    PcCreateBody:
      type: object
      properties:
        class:
          type: integer
          minimum: 1
          maximum: 6
          example: 3
          nullable: false
        race:
          type: integer
          minimum: 1
          maximum: 4
          example: 4
          nullable: false
        name:
          type: string
          format: string
          nullable: false
          example: "Mÿ fàncy Sîng'0uin"
          pattern: "^[\\w ']{20}$" # regex for 20chars string
        gender:
          type: boolean
          nullable: false
        cosmetic:
          type: object
          properties:
            metaid:
              type: integer
              example: 17
            data:
              type: object
              properties:
                hasGender:
                  type: boolean
                  example: True
                beforeArmor:
                  type: boolean
                  example: False
                hideArmor:
                  type: array
                  items:
                    type: integer
                  nullable: true
        equipment:
          type: object
          properties:
            lefthand:
              type: object
              properties:
                metaid:
                  type: integer
                  example: 1
                metatype:
                  type: string
                  example: 'weapon'
            righthand:
              type: object
              properties:
                metaid:
                  type: integer
                  example: 14
                metatype:
                  type: string
                  example: 'weapon'

    MpSendPostBody:
      type: object
      properties:
        src:
          type: integer
          format: integer
        dst:
          type: array
          items:
            type: integer
        subject:
          type: string
          format: string
        body:
          type: string
          format: string

    KorpCreateBody:
      type: object
      properties:
        name:
          type: string
          format: string
          nullable: false
          example: 'My fancy Korp'
          pattern: '^.{16}$'      # regex for 16chars string

    InstanceCreateBody:
      type: object
      properties:
        hardcore:
          type: boolean
          nullable: false
          example: False
        fast:
          type: boolean
          nullable: false
          example: False
        public:
          type: boolean
          nullable: false
          example: True
        mapid:
          type: integer
          nullable: false
          example: 1
          minimum: 1

    InternalCreatureEffectsResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: object
          properties:
            effects:
              type: array
              items:
                $ref: '#/components/schemas/EffectObject'
            creature:
              $ref: '#/components/schemas/PcObject'
        success:
          type: boolean
          nullable: false

    InternalKorpResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: object
          properties:
            members:
              type: array
              items:
                $ref: '#/components/schemas/PcObject'
            pending:
              type: array
              items:
                $ref: '#/components/schemas/PcObject'
            korp:
              $ref: '#/components/schemas/KorpObject'
        success:
          type: boolean
          nullable: false

    InternalKorpsResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: array
          items:
            $ref: '#/components/schemas/KorpObject'
        success:
          type: boolean
          nullable: false
    InternalCreaturePaResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: object
          properties:
            creature:
              $ref: '#/components/schemas/PcObject'
            pa:
              $ref: '#/components/schemas/PaObject'
        success:
          type: boolean
          nullable: false

    InternalDiscordCreatureResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: object
          properties:
            creature:
              $ref: '#/components/schemas/PcObject'
            user:
              $ref: '#/components/schemas/UserObject'
        success:
          type: boolean
          nullable: false
    InternalDiscordCreaturesResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: array
          items:
            $ref: '#/components/schemas/PcObject'
        success:
          type: boolean
          nullable: false
    InternalCreatureProfileResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          $ref: '#/components/schemas/PcObject'
        success:
          type: boolean
          nullable: false

    InternalSquadResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: object
          properties:
            members:
              type: array
              items:
                $ref: '#/components/schemas/PcObject'
            pending:
              type: array
              items:
                $ref: '#/components/schemas/PcObject'
            squad:
              $ref: '#/components/schemas/SquadObject'
        success:
          type: boolean
          nullable: false

    InternalSquadsResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: array
          items:
            $ref: '#/components/schemas/SquadObject'
        success:
          type: boolean
          nullable: false

    InternalCreatureStatusesResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: object
          properties:
            statuses:
              type: array
              items:
                $ref: '#/components/schemas/StatusObject'
            pc:
              $ref: '#/components/schemas/PcObject'
        success:
          type: boolean
          nullable: false

    InternalUserResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          $ref: '#/components/schemas/UserObject'
        success:
          type: boolean
          nullable: false

    InternalCreatureEquipmentResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: object
          nullable: true
          properties:
            creature:
              $ref: '#/components/schemas/PcObject'
            equipment:
              $ref: '#/components/schemas/EquipmentObject'
        success:
          type: boolean
          nullable: false

    InternalCreatureStatsResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: object
          properties:
            creature:
              $ref: '#/components/schemas/PcObject'
            stats:
              $ref: '#/components/schemas/StatsObject'
        success:
          type: boolean
          nullable: false

    InternalCreatureWalletResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: object
          nullable: true
          properties:
            pc:
              $ref: '#/components/schemas/PcObject'
            stats:
              $ref: '#/components/schemas/WalletObject'
        success:
          type: boolean
          nullable: false

    GenericResponse:
      type: object
      properties:
        msg:
          type: string
          format: string
          nullable: false
        payload:
          type: object
          nullable: true
        success:
          type: boolean
          nullable: false

    EffectObject:
      type: object
      nullable: false
      properties:
        bearer:
          type: integer
          nullable: false
        charge_base:
          type: integer
          nullable: false
        charge_left:
          type: integer
          nullable: false
        duration_base:
          type: integer
          nullable: false
        duration_left:
          type: integer
          nullable: false
        timestamp_end:
          type: integer
          nullable: false
        timestamp_start:
          type: integer
          nullable: false
        type:
          type: string
          nullable: false

    KorpObject:
      type: object
      nullable: false
      properties:
        created:
          type: string
          nullable: false
        date:
          type: string
          nullable: false
        id:
          type: integer
          nullable: false
        leader:
          type: integer
          nullable: false
        name:
          type: string
          nullable: true

    PaObject:
      type: object
      nullable: true
      properties:
        blue:
          type: object
          properties:
            pa:
              type: integer
              nullable: false
            ttl:
              type: integer
              nullable: false
            ttnpa:
              type: integer
              nullable: false
        red:
          type: object
          properties:
            pa:
              type: integer
              nullable: false
            ttl:
              type: integer
              nullable: false
            ttnpa:
              type: integer
              nullable: false

    PcObject:
      type: object
      nullable: true
      properties:
        account:
          type: integer
          nullable: false
        date:
          type: string
          nullable: false
        gender:
          type: boolean
          nullable: false
        id:
          type: integer
          nullable: false
        instance:
          type: integer
          nullable: true
        korp:
          type: integer
          nullable: true
        korp_rank:
          type: string
          nullable: true
        level:
          type: integer
          nullable: false
        name:
          type: string
          nullable: false
        race:
          type: integer
          nullable: false
        rarity:
          type: string
          nullable: false
        squad:
          type: integer
          nullable: true
        squad_rank:
          type: string
          nullable: false
        targeted_by:
          type: integer
          nullable: true
        x:
          type: integer
          nullable: true
        xp:
          type: integer
          nullable: false
        y:
          type: integer
          nullable: true

    SquadObject:
      type: object
      nullable: false
      properties:
        created:
          type: string
          nullable: false
        date:
          type: string
          nullable: false
        id:
          type: integer
          nullable: false
        leader:
          type: integer
          nullable: false
        name:
          type: string
          nullable: true

    StatsObject:
      type: object
      nullable: true
      properties:
        base:
          type: object
          properties:
            b:
              type: integer
              nullable: false
            g:
              type: integer
              nullable: false
            m:
              type: integer
              nullable: false
            p:
              type: integer
              nullable: false
            r:
              type: integer
              nullable: false
            v:
              type: integer
              nullable: false
        def:
          type: object
          properties:
            armor:
              type: object
              properties:
                b:
                  type: integer
                  nullable: false
                p:
                  type: integer
                  nullable: false
            dodge:
              type: integer
              nullable: false
            hp:
              type: integer
              nullable: false
            hpmax:
              type: integer
              nullable: false
            parry:
              type: integer
              nullable: false
        off:
          type: object
          properties:
            capcom:
              type: integer
              nullable: false
            capsho:
              type: integer
              nullable: false

    StatusObject:
      type: object
      nullable: false
      properties:
        bearer:
          type: integer
          nullable: false
        duration_base:
          type: integer
          nullable: false
        duration_left:
          type: integer
          nullable: false
        timestamp_end:
          type: integer
          nullable: false
        timestamp_start:
          type: integer
          nullable: false
        type:
          type: string
          nullable: false

    UserObject:
      type: object
      nullable: true
      properties:
        active:
          type: boolean
          nullable: false
        created:
          type: string
          nullable: false
        d_ack:
          type: boolean
          nullable: false
        d_name:
          type: string
          nullable: false
        date:
          type: string
          nullable: false
        hash:
          type: string
          nullable: false
        id:
          type: integer
          nullable: false
        mail:
          type: string
          nullable: false
        name:
          type: string
          nullable: false

    WalletObject:
      type: object
      nullable: false
      properties:
        arrow:
          type: integer
          nullable: false
        bolt:
          type: integer
          nullable: false
        broken:
          type: integer
          nullable: false
        cal22:
          type: integer
          nullable: false
        cal223:
          type: integer
          nullable: false
        cal311:
          type: integer
          nullable: false
        cal50:
          type: integer
          nullable: false
        cal55:
          type: integer
          nullable: false
        common:
          type: integer
          nullable: false
        currency:
          type: integer
          nullable: false
        date:
          type: string
          nullable: false
        epic:
          type: integer
          nullable: false
        id:
          type: integer
          nullable: false
        legendary:
          type: integer
          nullable: false
        rare:
          type: integer
          nullable: false
        shell:
          type: integer
          nullable: false
        uncommon:
          type: integer
          nullable: false

    EquipmentObject:
      type: object
      nullable: false
      properties:
        feet:
          $ref: '#/components/schemas/ItemObject'
        hands:
          $ref: '#/components/schemas/ItemObject'
        head:
          $ref: '#/components/schemas/ItemObject'
        holster:
          $ref: '#/components/schemas/ItemObject'
        lefthand:
          $ref: '#/components/schemas/ItemObject'
        legs:
          $ref: '#/components/schemas/ItemObject'
        righthand:
          $ref: '#/components/schemas/ItemObject'
        shoulders:
          $ref: '#/components/schemas/ItemObject'
        torso:
          $ref: '#/components/schemas/ItemObject'

    ItemObject:
      type: object
      nullable: true
      properties:
        ammo:
          type: integer
          nullable: true
        bearer:
          type: integer
          nullable: false
        bound:
          type: boolean
          nullable: false
        bound_type:
          type: string
          nullable: false
        date:
          type: string
          nullable: false
        id:
          type: integer
          nullable: false
        metaid:
          type: integer
          nullable: false
        modded:
          type: boolean
          nullable: false
        mods:
          type: string
          nullable: true
        offsetx:
          type: integer
          nullable: true
        offsety:
          type: integer
          nullable: true
        rarity:
          type: string
          nullable: false
        state:
          type: integer
          nullable: false

  securitySchemes:
    refresh_token:
      type: http
      scheme: bearer
      bearerFormat: JWT
    access_token:
      type: http
      scheme: bearer
      bearerFormat: JWT
    internal_token:
      type: http
      scheme: bearer
      bearerFormat: JWT

security:
  - refresh_token: []
  - access_token: []
  - internal_token: []
